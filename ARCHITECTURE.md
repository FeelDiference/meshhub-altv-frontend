# üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   ALT:V Game    ‚îÇ
‚îÇ                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚îÇ  WebView  ‚îÇ‚óÑ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  React Application   ‚îÇ
‚îÇ  ‚îÇ (Overlay) ‚îÇ  ‚îÇ     ‚îÇ  (client/src/)       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ≤‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ        ‚îÇ        ‚îÇ                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                ‚îÇ
‚îÇ  ‚îÇ   Client  ‚îÇ  ‚îÇ                ‚îÇ
‚îÇ  ‚îÇ  Scripts  ‚îÇ  ‚îÇ                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ≤‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                ‚îÇ
‚îÇ        ‚îÇ        ‚îÇ                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                ‚îÇ
‚îÇ  ‚îÇ  Server   ‚îÇ  ‚îÇ                ‚îÇ
‚îÇ  ‚îÇ  Scripts  ‚îÇ  ‚îÇ                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ≤‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
         ‚îÇ                         ‚îÇ
         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ  ‚îÇ
         ‚ñº  ‚ñº
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ   MeshHub Backend    ‚îÇ
   ‚îÇ  (hub.feeld.space)   ‚îÇ
   ‚îÇ                      ‚îÇ
   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
   ‚îÇ  ‚îÇ   PostgreSQL   ‚îÇ  ‚îÇ
   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
   ‚îÇ  ‚îÇ  RPF Archives  ‚îÇ  ‚îÇ
   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. WebView (React Application)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- React 18 + TypeScript
- Tailwind CSS
- Framer Motion
- Axios

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω
- –ü–æ–∑–∏—Ü–∏—è: —Å–ø—Ä–∞–≤–∞, 400px —à–∏—Ä–∏–Ω–∞
- Overlay —Ä–µ–∂–∏–º (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏–≥—Ä—É)
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏**:

```typescript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
interface AppState {
  auth: {
    isAuthenticated: boolean;
    user: User | null;
    token: string | null;
  };
  vehicles: {
    list: VehicleResource[];
    selected: VehicleResource | null;
    currentSpawned: number | null;
  };
  editor: {
    originalHandling: HandlingData | null;
    currentHandling: HandlingData | null;
    isDirty: boolean;
  };
  ui: {
    currentPage: PageName;
    isLoading: boolean;
    notifications: Notification[];
  };
}
```

### 2. ALT:V Client Scripts

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ –≤ –∏–≥—Ä–µ

**–§–∞–π–ª—ã**:
- `client/index.ts` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- `client/webview.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebView
- `client/vehicle-controller.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º–∏
- `client/handling-applier.ts` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:

```typescript
// client/index.ts
import * as alt from 'alt-client';
import { WebViewManager } from './webview';
import { VehicleController } from './vehicle-controller';

alt.on('connectionComplete', () => {
  WebViewManager.init();
});

alt.onServer('meshhub:open', () => {
  WebViewManager.show();
});

// client/webview.ts
export class WebViewManager {
  static webview: alt.WebView | null = null;
  
  static init(): void {
    this.webview = new alt.WebView('http://localhost:3000', false);
    this.webview.pos = { x: 1920 - 400, y: 0 };
    this.webview.size = { x: 400, y: 1080 };
    this.webview.isVisible = false;
    
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    this.registerHandlers();
  }
  
  static show(): void {
    if (this.webview) {
      this.webview.isVisible = true;
      alt.showCursor(true);
    }
  }
  
  static hide(): void {
    if (this.webview) {
      this.webview.isVisible = false;
      alt.showCursor(false);
    }
  }
  
  static registerHandlers(): void {
    this.webview?.on('vehicle:spawn', (modelName: string) => {
      VehicleController.spawn(modelName);
    });
    
    this.webview?.on('handling:update', (param: string, value: number) => {
      VehicleController.updateHandling(param, value);
    });
    
    this.webview?.on('panel:close', () => {
      this.hide();
    });
  }
}

// client/vehicle-controller.ts
export class VehicleController {
  static currentVehicle: alt.Vehicle | null = null;
  
  static async spawn(modelName: string): Promise<void> {
    // 1. –£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∞–≤—Ç–æ
    if (this.currentVehicle) {
      this.currentVehicle.destroy();
    }
    
    // 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å
    const hash = alt.hash(modelName);
    await this.loadModel(hash);
    
    // 3. –ü–æ–ª—É—á–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –∏–≥—Ä–æ–∫–∞
    const player = alt.Player.local;
    const pos = player.pos;
    const heading = player.rot.z;
    
    // 4. –°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å
    const spawnPos = {
      x: pos.x + 3 * Math.cos(heading),
      y: pos.y + 3 * Math.sin(heading),
      z: pos.z
    };
    
    this.currentVehicle = new alt.Vehicle(hash, spawnPos.x, spawnPos.y, spawnPos.z, 0, 0, heading);
    
    // 5. –ü–æ—Å–∞–¥–∏—Ç—å –∏–≥—Ä–æ–∫–∞
    await alt.Utils.wait(100);
    native.setPedIntoVehicle(player.scriptID, this.currentVehicle.scriptID, -1);
    
    // 6. –£–≤–µ–¥–æ–º–∏—Ç—å WebView
    WebViewManager.webview?.emit('vehicle:spawned', {
      vehicleId: this.currentVehicle.id,
      modelName: modelName
    });
  }
  
  static updateHandling(param: string, value: number): void {
    if (!this.currentVehicle) return;
    
    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä —á–µ—Ä–µ–∑ –Ω–∞—Ç–∏–≤—ã
    HandlingApplier.apply(this.currentVehicle, param, value);
  }
  
  private static loadModel(hash: number): Promise<void> {
    return new Promise((resolve) => {
      native.requestModel(hash);
      const interval = alt.setInterval(() => {
        if (native.hasModelLoaded(hash)) {
          alt.clearInterval(interval);
          resolve();
        }
      }, 100);
    });
  }
}

// client/handling-applier.ts
export class HandlingApplier {
  static apply(vehicle: alt.Vehicle, param: string, value: number): void {
    const veh = vehicle.scriptID;
    
    switch (param) {
      // –§–∏–∑–∏–∫–∞
      case 'fMass':
        native.setVehicleHandlingFloat(veh, 'CHandlingData', 'fMass', value);
        break;
      case 'fInitialDragCoeff':
        native.setVehicleHandlingFloat(veh, 'CHandlingData', 'fInitialDragCoeff', value);
        break;
      
      // –¢—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è
      case 'fDriveBiasFront':
        native.setVehicleHandlingFloat(veh, 'CHandlingData', 'fDriveBiasFront', value);
        break;
      case 'nInitialDriveGears':
        native.setVehicleHandlingInt(veh, 'CHandlingData', 'nInitialDriveGears', Math.floor(value));
        break;
      case 'fInitialDriveForce':
        native.setVehicleHandlingFloat(veh, 'CHandlingData', 'fInitialDriveForce', value);
        break;
      case 'fBrakeForce':
        native.setVehicleHandlingFloat(veh, 'CHandlingData', 'fBrakeForce', value);
        break;
      case 'fSteeringLock':
        native.setVehicleHandlingFloat(veh, 'CHandlingData', 'fSteeringLock', value);
        break;
      
      // –¢—è–≥–∞
      case 'fTractionCurveMax':
        native.setVehicleHandlingFloat(veh, 'CHandlingData', 'fTractionCurveMax', value);
        break;
      case 'fTractionCurveMin':
        native.setVehicleHandlingFloat(veh, 'CHandlingData', 'fTractionCurveMin', value);
        break;
      
      // –ü–æ–¥–≤–µ—Å–∫–∞
      case 'fSuspensionForce':
        native.setVehicleHandlingFloat(veh, 'CHandlingData', 'fSuspensionForce', value);
        break;
      case 'fSuspensionCompDamp':
        native.setVehicleHandlingFloat(veh, 'CHandlingData', 'fSuspensionCompDamp', value);
        break;
      
      // ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö ~60 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    }
    
    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
    native.modifyVehicleTopSpeed(veh, 1.0);
  }
}
```

### 3. ALT:V Server Scripts

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞

**–§–∞–π–ª—ã**:
- `server/index.ts` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- `server/commands.ts` - –∫–æ–º–∞–Ω–¥—ã
- `server/api-client.ts` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è MeshHub API

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:

```typescript
// server/index.ts
import * as alt from 'alt-server';
import { registerCommands } from './commands';

alt.on('playerConnect', (player: alt.Player) => {
  alt.log(`[MeshHub] Player ${player.name} connected`);
});

registerCommands();

// server/commands.ts
import * as alt from 'alt-server';

export function registerCommands(): void {
  alt.on('consoleCommand', (name: string, ...args: string[]) => {
    if (name === 'meshhub') {
      // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –∫–ª–∏–µ–Ω—Ç—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è UI
      const player = alt.Player.all[0]; // –î–ª—è –ø—Ä–∏–º–µ—Ä–∞
      alt.emitClient(player, 'meshhub:open');
    }
  });
}

// server/api-client.ts
import axios from 'axios';

const API_URL = 'https://hub.feeld.space';

export class MeshHubAPI {
  static async getVehicles(): Promise<VehicleResource[]> {
    const response = await axios.get(`${API_URL}/api/rpf/vehicles`);
    return response.data;
  }
  
  static async downloadVehicle(id: string): Promise<Blob> {
    const response = await axios.get(`${API_URL}/api/rpf/vehicles/${id}/download`, {
      responseType: 'blob'
    });
    return response.data;
  }
  
  static async saveHandling(id: string, handling: HandlingData): Promise<SaveResult> {
    const response = await axios.post(`${API_URL}/api/rpf/vehicles/${id}/handling`, handling);
    return response.data;
  }
}
```

### 4. MeshHub Backend Integration

**–ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**:

```go
// GET /api/rpf/vehicles
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
func (h *RPFHandler) GetVehicles(w http.ResponseWriter, r *http.Request) {
  // 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞—Ä—Ö–∏–≤—ã —Ç–∏–ø–∞ vehicle –∏–∑ –ë–î
  // 2. –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  // 3. –í–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
}

// GET /api/rpf/vehicles/{id}/download
// –°–∫–∞—á–∞—Ç—å —Ä–µ—Å—É—Ä—Å –≤ —Ñ–æ—Ä–º–∞—Ç–µ ZIP
func (h *RPFHandler) DownloadVehicle(w http.ResponseWriter, r *http.Request) {
  // 1. –ù–∞–π—Ç–∏ –∞—Ä—Ö–∏–≤ –ø–æ ID
  // 2. –ó–∞–ø–∞–∫–æ–≤–∞—Ç—å –≤ ZIP (—É–∂–µ –µ—Å—Ç—å –≤ download_service.go)
  // 3. –û—Ç–¥–∞—Ç—å ZIP
}

// POST /api/rpf/vehicles/{id}/handling
// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å handling.meta –≤ RPF
func (h *RPFHandler) SaveVehicleHandling(w http.ResponseWriter, r *http.Request) {
  // 1. –ü–æ–ª—É—á–∏—Ç—å handling –∏–∑ body
  // 2. –ù–∞–π—Ç–∏ .rpf –∞—Ä—Ö–∏–≤
  // 3. –ò–∑–≤–ª–µ—á—å handling.meta
  // 4. –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
  // 5. –û–±–Ω–æ–≤–∏—Ç—å XML
  // 6. –ü–µ—Ä–µ–ø–∞–∫–æ–≤–∞—Ç—å .rpf
  // 7. –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –ë–î
  // 8. –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
}
```

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```
User -> WebView -> hub.feeld.space/api/auth/login
                         ‚Üì
                    JWT Token
                         ‚Üì
                   SessionManager (—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ AES-256)
                         ‚Üì
                   LocalStorage
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

```
WebView -> GET /api/rpf/vehicles
             ‚Üì
        Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
             ‚Üì
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ [{id, name, metadata, ...}]
             ‚Üì
        WebView –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏
```

### –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è

```
User –Ω–∞–∂–∏–º–∞–µ—Ç "–°–∫–∞—á–∞—Ç—å"
        ‚Üì
WebView -> GET /api/rpf/vehicles/{id}/download
        ‚Üì
Backend —Å–æ–∑–¥–∞–µ—Ç ZIP
        ‚Üì
WebView –ø–æ–ª—É—á–∞–µ—Ç Blob
        ‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ resources/meshhub/{name}/dlc.rpf
        ‚Üì
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
```

### –°–ø–∞–≤–Ω –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```
User –Ω–∞–∂–∏–º–∞–µ—Ç "–ó–∞—Å–ø–∞–≤–Ω–∏—Ç—å"
        ‚Üì
WebView -> emit('vehicle:spawn', modelName)
        ‚Üì
ALT:V Client -> VehicleController.spawn()
        ‚Üì
–°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è, –ø–æ—Å–∞–¥–∫–∞ –∏–≥—Ä–æ–∫–∞
        ‚Üì
Client -> emit('vehicle:spawned', {id, modelName})
        ‚Üì
WebView –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä
        ‚Üì
User –∏–∑–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä
        ‚Üì
WebView -> emit('handling:update', param, value)
        ‚Üì
Client -> HandlingApplier.apply()
        ‚Üì
–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–∞—Ç–∏–≤—ã (LIVE)
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (Server Mode)

```
User –≤—ã–±–∏—Ä–∞–µ—Ç "Server" –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
        ‚Üì
WebView -> POST /api/rpf/vehicles/{id}/handling
        ‚Üì
Backend:
  - –ò–∑–≤–ª–µ–∫–∞–µ—Ç handling.meta –∏–∑ .rpf
  - –°–æ–∑–¥–∞–µ—Ç –±—ç–∫–∞–ø
  - –û–±–Ω–æ–≤–ª—è–µ—Ç XML
  - –ü–µ—Ä–µ–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç .rpf
  - –û–±–Ω–æ–≤–ª—è–µ—Ç –ë–î
        ‚Üì
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        ‚Üì
WebView –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
"–£—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ! –ü–µ—Ä–µ–∫–∞—á–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å?"
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (Client Mode)

```
User –≤—ã–±–∏—Ä–∞–µ—Ç "Client" –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
        ‚Üì
WebView –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç XML
        ‚Üì
–°–æ–∑–¥–∞–µ—Ç Blob
        ‚Üì
–°–∫–∞—á–∏–≤–∞–µ—Ç –∫–∞–∫ handling_{name}.meta
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π

```typescript
// utils/crypto.ts
import CryptoJS from 'crypto-js';

export class SessionCrypto {
  private static getKey(): string {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º hardware ID –∫–∞–∫ –∫–ª—é—á
    // –í ALT:V –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ alt.getMacAddress() –∏–ª–∏ –ø–æ–¥–æ–±–Ω–æ–µ
    return 'unique-hardware-id';
  }
  
  static encrypt(data: any): string {
    const key = this.getKey();
    const json = JSON.stringify(data);
    return CryptoJS.AES.encrypt(json, key).toString();
  }
  
  static decrypt(encrypted: string): any {
    const key = this.getKey();
    const bytes = CryptoJS.AES.decrypt(encrypted, key);
    const json = bytes.toString(CryptoJS.enc.Utf8);
    return JSON.parse(json);
  }
}
```

### HTTPS

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `hub.feeld.space` —á–µ—Ä–µ–∑ HTTPS.

### –í–∞–ª–∏–¥–∞—Ü–∏—è

–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –ò —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

## –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è

1. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `/components/{module}/`
2. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ `/pages/{Module}Page.tsx`
3. –î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ–Ω—é:

```typescript
// App.tsx
const menuItems: MenuItem[] = [
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  {
    id: 'new-module',
    label: '–ù–æ–≤—ã–π –º–æ–¥—É–ª—å',
    icon: SomeIcon,
    component: NewModulePage,
    enabled: true,
    order: 4
  }
];
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ —Ä–µ—Å—É—Ä—Å–∞

1. –°–æ–∑–¥–∞—Ç—å —Ç–∏–ø—ã –≤ `/types/`
2. –°–æ–∑–¥–∞—Ç—å API –º–µ—Ç–æ–¥—ã –≤ `/services/`
3. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
4. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ ALT:V –∫–ª–∏–µ–Ω—Ç

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **React.memo** –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **useMemo** –∏ **useCallback** –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- **Lazy loading** –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü
- **Debounce** –¥–ª—è live –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (100ms)
- **WebView optimization**: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä, —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã




