# Camera Sync Fix - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

## –ü—Ä–æ–±–ª–µ–º–∞

‚ùå **–ú–æ–¥–µ–ª—å —É–ª–µ—Ç–∞–ª–∞** –Ω–∞ offset 5.87m  
‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ** –º–æ–¥–µ–ª–∏ –∏ –∫–∞–º–µ—Ä—ã

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑–∞–ª–∏**:
```
Camera pos: -3.04, 3.64, -0.77   // –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
FPS: 102                          // –û—Ç–ª–∏—á–Ω–æ
Vehicle rotation: 16.8¬∞, -0.6¬∞, -33.0¬∞
```

**–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞**:
1. –ú–æ–¥–µ–ª—å —Å–º–µ—â–µ–Ω–∞ –ø–æ Y (yOffset –¥–ª—è "—Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–∞ –ø–æ–ª—É")
2. –ú–æ–¥–µ–ª—å –ø–æ–≤–µ—Ä–Ω—É—Ç–∞ [90¬∞, 180¬∞, 0¬∞] –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å —É—á–µ—Ç–æ–º –ø–æ–≤–æ—Ä–æ—Ç–∞ –º–æ–¥–µ–ª–∏
4. **–ù–û** –≤ Game View —ç—Ç–æ –ª–æ–º–∞–ª–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é!

## –†–µ—à–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 1: –ú–æ–¥–µ–ª—å –≤ —Ü–µ–Ω—Ç—Ä–µ (0, 0, 0) –≤ Game View

**–§–∞–π–ª**: `YftViewer.tsx` ‚Üí `VehicleModel` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–ë—ã–ª–æ**:
```typescript
const position = [0, yOffset, 0]  // –í—Å–µ–≥–¥–∞ —Å–º–µ—â–µ–Ω–∞ –ø–æ Y
```

**–°—Ç–∞–ª–æ**:
```typescript
const position = gameViewMode 
  ? [0, 0, 0]           // Game View: —Å—Ç—Ä–æ–≥–æ –≤ —Ü–µ–Ω—Ç—Ä–µ
  : [0, yOffset, 0]     // Normal View: –Ω–∞ –ø–æ–ª—É
```

**–ü–æ—á–µ–º—É**: –í Game View –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –º–∏—Ä–æ–≤–æ–º —Ü–µ–Ω—Ç—Ä–µ (0, 0, 0), –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–º–µ—Ä–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–æ–π –∫–æ—Ç–æ—Ä–∞—è "–≤ —Ü–µ–Ω—Ç—Ä–µ —Å–≤–æ–µ–≥–æ –º–∏—Ä–∞".

---

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 2: –£–±—Ä–∞–Ω –ø–æ–≤–æ—Ä–æ—Ç –º–æ–¥–µ–ª–∏ –≤ Game View

**–ë—ã–ª–æ**:
```typescript
rotation={[Math.PI/2, Math.PI, 0]}  // –í—Å–µ–≥–¥–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∞
```

**–°—Ç–∞–ª–æ**:
```typescript
const rotation = gameViewMode
  ? [vehicleRotation.x, vehicleRotation.y, vehicleRotation.z]  // –í—Ä–∞—â–µ–Ω–∏–µ –º–∞—à–∏–Ω—ã –∏–∑ –∏–≥—Ä—ã
  : [Math.PI/2, Math.PI, 0]                                     // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç
```

**–ü–æ—á–µ–º—É**: –í Game View –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ "—Å—ã—Ä–æ–π" –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑ .yft —Ñ–∞–π–ª–∞ + –≤—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è, —á—Ç–æ–±—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∏–≥—Ä–æ–π.

---

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 3: –ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–±–µ–∑ –∏–Ω–≤–µ—Ä—Å–∏–∏)

**–§–∞–π–ª**: `coordinateTransform.ts`

**–ë—ã–ª–æ**:
```typescript
return {
  x: -gtaRelativePos.x,  // –ò–Ω–≤–µ—Ä—Å–∏—è
  y: gtaRelativePos.y,
  z: -gtaRelativePos.z   // –ò–Ω–≤–µ—Ä—Å–∏—è
}
```

**–°—Ç–∞–ª–æ**:
```typescript
return {
  x: gtaRelativePos.x,   // –ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞
  y: gtaRelativePos.y,   // –ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞  
  z: gtaRelativePos.z    // –ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞
}
```

**–ü–æ—á–µ–º—É**: –†–∞–Ω—å—à–µ –º—ã –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ X –∏ Z —á—Ç–æ–±—ã —É—á–µ—Å—Ç—å –ø–æ–≤–æ—Ä–æ—Ç –º–æ–¥–µ–ª–∏ [180¬∞ –ø–æ Y]. –¢–µ–ø–µ—Ä—å –º–æ–¥–µ–ª—å –Ω–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∞ –≤ Game View ‚Üí –∏–Ω–≤–µ—Ä—Å–∏—è –Ω–µ –Ω—É–∂–Ω–∞!

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ú–æ–¥–µ–ª—å —Å—Ç—Ä–æ–≥–æ –≤ —Ü–µ–Ω—Ç—Ä–µ (0, 0, 0)**  
‚úÖ **–ë–µ–∑ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–≤–æ—Ä–æ—Ç–æ–≤**  
‚úÖ **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã**  
‚úÖ **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞–º–µ—Ä—ã –Ω–∞–ø—Ä—è–º—É—é (–±–µ–∑ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π)**

### –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:

```
GTA V:
  –ú–∞—à–∏–Ω–∞ –Ω–∞ –º–∏—Ä–æ–≤—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö (X, Y, Z)
  –ö–∞–º–µ—Ä–∞ –Ω–∞ –º–∏—Ä–æ–≤—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö (X+dx, Y+dy, Z+dz)
  Relative: (dx, dy, dz)
  
Three.js (Game View):
  –ú–æ–¥–µ–ª—å –≤ —Ü–µ–Ω—Ç—Ä–µ (0, 0, 0)
  –ú–æ–¥–µ–ª—å –≤—Ä–∞—â–µ–Ω–∏–µ = Vehicle rotation
  –ö–∞–º–µ—Ä–∞ position = (dx, dy, dz)  // –ë–ï–ó –¢–†–ê–ù–°–§–û–†–ú–ê–¶–ò–ô!
  
= –¢–û–ß–ù–û–ï –°–û–í–ü–ê–î–ï–ù–ò–ï! ‚ú®
```

---

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### 1. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ

```bash
cd meshhub_altv_integration
npm run build
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

–ü–æ–ª–Ω—ã–π restart Alt:V —Å–µ—Ä–≤–µ—Ä–∞!

### 3. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ

1. –°—è–¥—å—Ç–µ –≤ –º–∞—à–∏–Ω—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
2. F10 ‚Üí Vehicles ‚Üí YFT Viewer
3. Game View
4. ‚úÖ –ú–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞—Å—Ç—å —Å —Ä–µ–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–æ–π!

---

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**Debug UI** –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
- FPS: ~100-137 (–æ—Ç–ª–∏—á–Ω–æ!)
- Offset: 1-5m (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∫–∞–º–µ—Ä—ã –æ—Ç –º–∞—à–∏–Ω—ã)
- FOV: ~50¬∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç zoom)

**–í–∏–∑—É–∞–ª—å–Ω–æ**:
- –ú–æ–¥–µ–ª—å –ù–ï —É–ª–µ—Ç–∞–µ—Ç
- –ú–æ–¥–µ–ª—å —Ç–æ—á–Ω–æ –≤ –º–µ—Å—Ç–µ —Ä–µ–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
- –ü–æ–≤–æ—Ä–æ—Ç –∫–∞–º–µ—Ä—ã = –ø–æ–≤–æ—Ä–æ—Ç –º–æ–¥–µ–ª–∏
- Zoom —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö

### YftViewer.tsx
- `VehicleModel`: –¥–æ–±–∞–≤–ª–µ–Ω prop `gameViewMode` –∏ `vehicleRotation`
- `position`: —É—Å–ª–æ–≤–Ω–æ–µ - (0,0,0) –≤ Game View, yOffset –≤ Normal
- `rotation`: —É—Å–ª–æ–≤–Ω–æ–µ - vehicle rotation –≤ Game View, —Å—Ç–∞–Ω–¥–∞—Ä—Ç –≤ Normal
- –ü–µ—Ä–µ–¥–∞—á–∞ `vehicleRotation` –≤ VehicleModel –∏–∑ sync –¥–∞–Ω–Ω—ã—Ö

### coordinateTransform.ts
- `convertCameraPosition()`: —É–±—Ä–∞–Ω–∞ –∏–Ω–≤–µ—Ä—Å–∏—è X –∏ Z
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã - —Ç–µ–ø–µ—Ä—å –ø—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

---

**–ì–æ—Ç–æ–≤–æ! –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ! üöÄ**

